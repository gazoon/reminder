actions:
  main:
    - goto:
        cond:
          - { if: '{{eq .part "title"}}', then: enter_title }
          - { if: '{{eq .part "date"}}', then: enter_date }
          - { if: '{{eq .part "description"}}', then: enter_description }
          - { if: '{{eq .part "attachment"}}', then: add_attachment }

  enter_title:
    - set_input_handler: "on_title"
    - send_text:
        {{if eq .error_msg ""}}
        "Enter title."
        {{else}}
        "Problems with title: {{.ErrorMsg}}. Type again."
        {{end}}

  enter_date:
    - set_input_handler: "on_date"
    - send_text:
        {{if eq .error_msg ""}}
        "Enter date."
        {{else}}
        "Problems with date: {{.ErrorMsg}}. Type again."
        {{end}}

  enter_description:
    - set_input_handler: "on_description"
    - send_text:
        {{if eq .error_msg ""}}
        "Enter Description (optional)."
        {{else}}
        "Problems with description: {{.ErrorMsg}}. Type again."
        {{end}}
    - send_buttons:
      - { text: "Done", handler: "page://reminder_creation/done", intents: ["done","ready","finish"] }

  add_attachment:
    - send_text:
        {{if eq .error_msg ""}}
        "Upload attachment (optional)."
        {{else}}
        "Problems with attachment: {{.ErrorMsg}}. Upload again."
        {{end}}
    - send_buttons:
      - { text: "Done", handler: "page://reminder_creation/done", intents: ["done","ready","finish"] }
  done:
    - redirect: "page://finish_reminder_creation"

  cancel:
    - redirect: "page://home"

intents:
  - words: ["cancel","close","exit","escape"]
    handler: "page://reminder_creation/cancel"
