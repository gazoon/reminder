iterate:
  {{if eq .Step "title"}}
  - set_input_handler: "on_title"
  - send_text:
    {{if eq .ErrorMsg ""}}
    "Enter title."
    {{else}}
    "Problems with title {{.ErrorMsg}}. Type again."
    {{end}}
  {{else if eq .Step "date"}}
  - set_input_handler: "on_date"
  - send_text:
    {{if eq .ErrorMsg ""}}
    "Enter date."
    {{else}}
    "Problems with date {{.ErrorMsg}}. Type again."
    {{end}}
  {{else if eq .Step "description"}}
  - set_input_handler: "on_description"
  - send_text_with_buttons:
    {{if eq .ErrorMsg ""}}
    - "Enter Description (optional)."
    {{else}}
    - "Problems with description {{.ErrorMsg}}. Type again."
    {{end}}
    - { text: "done", payload: "action://done" }
  {{else if eq .Step "attachment"}}
  - send_text_with_buttons:
    {{if eq .ErrorMsg ""}}
    - "Upload attachment (optional)."
    {{else}}
    - "Problems with attachment {{.ErrorMsg}}. Upload again."
    {{end}}
    - { text: "done", payload: "action://done" }
  {{end}}

intents:
  - words: ["cancel","close","exit","escape"]
    handler: "callback://cancel"
